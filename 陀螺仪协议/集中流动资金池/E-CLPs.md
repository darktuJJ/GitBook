---
description: 椭圆形流动资金池或E-CLPs
---

# E-CLPs

### E-CLPs的简介

**椭圆形CLPs，或E-CLPs，允许沿椭圆形的曲线进行交易。E-CLPs将被用于包括陀螺仪稳定币GYD在内的稳定币池。**

椭圆CLPs，或称E-CLPs，允许沿着椭圆的曲线进行交易。与其他CLPs类似，E-CLPs被设计为在价格范围内集中流动性。不同的是，E-CLP的流动性更灵活：它可以进一步集中，而不是均匀地分布在价格范围内。

E-CLPs将用于GYD交易市场，这些市场是将GYD与其他资产配对的资金池，并被校准为主要围绕挂钩提供流动性，但其价格界限是根据DSM赎回价格定制的。

{% hint style="info" %}
通过对一个圆进行不同的操作，E-CLP可以被校准为不同的使用情况。下面列出了主要的使用情况和通俗的解释。

* 对称性拉伸：有价格限制的 "稳定交换"（StableSwap）
* 非对称性拉伸：1美元的高流动性，在其他价格上有剩余的流动性
* 恒定循环：替代恒定产品的集中流动性
{% endhint %}

下面的示例图显示了E-CLP如何被校准为有价格界限，上限为1美元，而在1美元以下的价格则是不均匀的衰减。

{% embed url="https://2063019688-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-MU527HCtxlYaQoNazhF%2Fuploads%2F6MFdMLENqBV2xHs10zpr%2FE-CLP-v1%20(2)%20(1).gif?alt=media&token=b555debe-4aed-464c-ad07-86b0b93c7359" %}
具有价格界限的E-CLP的演示图，上限为1美元，低于1美元的价格不均匀地衰减。
{% endembed %}

E-CLP（增强型集中流动性池）设计简单且高效。通过仅在需要的地方提供流动性，E-CLP可以将资本效率提升至比StableSwap池高出75%以上。

<figure><img src="../../.gitbook/assets/E-CLP-liquidity-density-animated-chart-v6 (1).gif" alt=""><figcaption><p>E-CLP 的不对称集中流动性通过仅在需要的地方提供流动性来提升资本效率，相较于 StableSwap 池，能显著提高资金的利用率。</p></figcaption></figure>

### E-CLPs的优势

E-CLPs有两个主要属性，即价格界线和价格界线之间不均匀的流动性概况。这些属性允许资金池具有高度可定制的流动性配置，这可以在最常见的预期交易范围内大大增加资本效率。

**可定制的流动性配置：**使用椭圆的曲线允许高度可定制的流动性概况。E-CLPs可以被标定为接近大多数希望的交易曲线。E-CLP曲线可以被定制为具有某些低价格影响的区域和其他高价格影响的区域。

例如，可以使E-CLPs类似于Stableswap曲线的流动性概况，以及恒定产品曲线和这些曲线的灵活组合。

**价格界限：**E-CLP‘s的价格界限使E-CLP具有高度的资本效率。从功能上讲，这是在给定的交易曲线上实现流动性曲线的任意截断。实际上，资本效率来自于将交易曲线限定在资产的预期交易范围内。

在资产结构导致对交易价格限制的了解，或者做市商知道在给定价格之外提供流动性是无利可图的情况下，这可以提供显著的资本效率收益。

{% hint style="info" %}
例如，如果某个资产具有已知的铸造和赎回价格，那么在这些价格之外的订单流应始终通过铸造和赎回机制进行路由，因此在这些价格提供流动性并无任何收益。

在这种情况下，使用未截断的交易曲线（例如为该场景校准的StableSwap曲线）会导致效率大幅降低，因为流动性被无谓地分配在不必要的价格区间，因而未被使用，无法与E-CLP的灵活性相提并论。
{% endhint %}

针对带息资产的效率提升：E-CLP在多个方面提升了效率。除了不对称的集中流动性外，E-CLP还内置了利率提供方。利率提供方通过以下方式使带息资产池更加高效：

* 自动化流动性管理
* 缓解再平衡损失（LVR）

<figure><img src="../../.gitbook/assets/Rate-providers-v8 (1).gif" alt=""><figcaption><p>E-CLP 利率提供方通过自动化流动性管理和缓解再平衡损失（LVR），使带息资产池更加高效。</p></figcaption></figure>

**陀螺仪的E-CLPs的优势：**E-CLP的资本效率收益对于GYDGyro tradingMoney mMarket pools来说尤其大，它将GYD与其他资产配对。GYD通常应在1美元的铸币价格和赎回价格之间交易。在大多数情况下，GYD应该在1美元附近交易。然而，在特殊情况下，如在DSM的应急定价下，赎回价格可能会有折扣。E-CLP可以为这种由铸币和赎回价格限定的精确的流动性状况进行校准。相比之下，一个Stableswap池将为高于1美元的价格保留一半的流动性，而这种流动性是不必要的。

上面显示的E-CLP参数化有效地为可能出现的、但不太常见的价格范围保留了一些流动性，但只针对实际需要的地方。

{% hint style="info" %}
以Liquity的LUSD或Lido的stETH为例，铸币价格大致相当于上限价格，赎回价格大致相当于下限价格。&#x20;

因此，对于这些资产来说，最好是将流动性集中在这两个软价格边界之间的价格范围。在这些情况下，E-CLP将为这些资产对提供比Stableswap pools更高的资本效率。
{% endhint %}

值得注意的是，铸造和赎回操作总会产生一定的成本，无论是操作成本（如铸造或赎回交易的Gas费用）还是基本成本（机会成本、"学习成本"或其他）。这些溢价可以大致纳入价格区间的定义中。

### E-CLPs的风险

使用E-CLPs也伴随着某些风险，包括智能合约风险、策略风险和逆向选择风险。关于更全面的风险描述，请参考服务条款或管理你所选择的用户界面的类似文件，以及审查这里的代码。

**智能合约风险：**与任何智能合约一样，存在一个固有的风险，即利用或错误将存入的资产置于风险之中。这种风险可以通过进行代码审计和测试来降低，但不能完全缓解，特别是因为E-CLP是一个新的概念和实验性技术。

**策略风险：**通过进入资金池，LPers承诺采用一种做市策略，反过来也是一种投资组合再平衡规则，从根本上说，这种策略与仅仅持有基础资产或使用不同的再平衡规则具有不同的回报。E-CLP LP头寸的投资组合规则取决于池子的参数化。LPs应该独立考虑给定的投资组合规则和资金池参数。

**逆向选择风险：**在任何AMM资金池中，如果资金池中资产的真实相对市场价格长期跳动，LPers会因为逆向选择而产生损失。特别是，资金池会以比真实市场价格更差的价格提供 "陈旧 "的报价。逆向选择的损失将等于套利者将池子里的报价调回与市场其他部分平衡的利润。

### 技术规格

所有最重要的功能都定义在GyroECLPMath.sol文件中，并列在下表中。

| 功能介绍                     | 目的                                                           |
| ------------------------ | ------------------------------------------------------------ |
| calculateInvariant       | (Re-)从当前储备t = (x, y)计算出不变量r                                  |
| calcOutGivenIn           | 计算当某一数额进入池子时，扣除费用后，离开池子的数额。                                  |
| calcInGivenOut           | 计算当某一数额离开池子时，需要进入池子的数额。                                      |
| calcXGivenY              | 在一定数量的资产Y和一定的不变量下，计算资产X的数量。由calcOutGivenIn和calcInGivenOut使用。 |
| calcYGivenX              | 对给定的x来说，y的功能是相同的。                                            |
| liquidityInvariantUpdate | 当流动性以 "平衡 "的方式被添加/删除时，新的不变式（不影响价格）。这就避免了完全重新计算不变量。           |

从概念上讲，"椭圆 "函数是通过对圆的拉伸、旋转和位移进行变换而得到的。E-CLP不变量可以被描述为椭圆的小半径（也被称为 "半小轴"）。

### 技术规范

要阅读有关数学规范和实施的信息，请参见以下资源。

### 读取E-CLP参数

为了获取单个 E-CLP 校准的详细信息，可以查询 `getECLPParams`，它返回两个元组。

* 第一个元组返回 `int256`（有符号整数）类型的参数值，包括：`alpha`、`beta`、`c`、`s`、`lambda`。
* 第二个元组是基于第一个元组的链下计算结果，可在需要时进行引用或证明。该元组包含用于高精度计算的辅助变量，顺序为：`tauAlpha`、`taubBeta`、`u`、`v`、`w`、`z`、`d^2`。

各参数的含义如下：

* **α (alpha)**：定义价格区间的下限。
* **β (beta)**：定义价格区间的上限。
* **c, s**：定义旋转点，进一步定义为旋转角度的余弦（`c`）和正弦（`s`）。
* **最大流动性的价格**：为 `s/c` 的商（即旋转角的正切）。
* **λ (lambda)**：定义伸缩因子。`λ` 值越高，流动性越集中在价格区间内。`λ` 值越低，流动性在价格区间内的分布越均匀。从几何上看，较高的 `λ` 值意味着椭圆更加拉长，而 `λ = 1` 对应于一个圆形。

<figure><img src="../../.gitbook/assets/666(1).avif" alt=""><figcaption><p>关于 E-CLP 结构的示意图</p></figcaption></figure>

{% hint style="info" %}
注意，两个代币（“token0”和“token1”）的顺序是根据合约地址的字典顺序确定的，这是Balancer Vault的要求。例如，在比较地址“A0b8\[..]”和“e07F\[..]”时，以“A0b8”开头的地址将是Token0，而以“e07F”开头的地址将是Token1。

为了便于阅读，校准通常将GYD作为token0，另一资产作为token1。如果Balancer的规则不允许这样做（需要GYD作为token1），则参数需要按照以下方式进行“翻转”：`alpha' := 1/beta`，`beta' := 1/alpha`，`s' = c`，`c' = s`。
{% endhint %}

{% embed url="https://docs.gyro.finance/gyroscope-protocol/technical-documents" %}
